(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f8cc920"],{"0639":function(e,t,r){"use strict";var s=r("6207"),a=r.n(s);a.a},6207:function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-wrap"},[r("ul",{staticClass:"menu-tab"},e._l(e.menuTab,(function(t){return r("li",{key:t.id,class:{current:t.current},on:{click:function(r){return e.toggleMenu(t)}}},[e._v(" "+e._s(t.txt)+" ")])})),0),r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,size:"medium"}},[r("el-form-item",{staticClass:"item-form",attrs:{prop:"username"}},[r("label",[e._v("邮箱")]),r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{staticClass:"item-form",attrs:{prop:"password"}},[r("label",[e._v("密码")]),r("el-input",{attrs:{type:"password",autocomplete:"off",minlength:"6",maxlength:"20"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),"register"===e.model?r("el-form-item",{staticClass:"item-form",attrs:{prop:"passwords"}},[r("label",[e._v("确认密码")]),r("el-input",{attrs:{type:"password",autocomplete:"off",minlength:"6",maxlength:"20"},model:{value:e.ruleForm.passwords,callback:function(t){e.$set(e.ruleForm,"passwords",t)},expression:"ruleForm.passwords"}})],1):e._e(),r("el-form-item",{staticClass:"item-form",attrs:{prop:"code"}},[r("label",[e._v("验证码")]),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:15}},[r("el-input",{attrs:{type:"text",minlength:"6",maxlength:"6"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),r("el-col",{attrs:{span:9}},[r("el-button",{staticClass:"block",attrs:{type:"success",disabled:e.codeButtonStatus},on:{click:function(t){return e.getSms()}}},[e._v(e._s(e.codeButtonText))])],1)],1)],1),r("el-form-item",[r("el-button",{staticClass:"login-btn block",attrs:{type:"danger",disabled:e.loginButtonStatus},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v(e._s("login"==e.model?"登录":"注册"))])],1)],1),r("div",{staticStyle:{color:"#fff"}},[e._v("如果验证码显示太快您没有看清的话，请打开控制台查看（键盘按键F12或者鼠标右键检查打开控制台，然后点击Console进行查看验证码）")])],1)])},a=[],o=(r("4160"),r("159b"),r("6199")),n=r.n(o),l=r("7ded"),u=r("750b"),c=r("61f7"),i={setup:function(e,t){var r=t.refs,s=t.root,a=function(e,t,r){var s=/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/;""===t?r(new Error("请输入用户名!")):s.test(t)?r():r(new Error("用户名格式错误!"))},o=function(e,t,r){w.password=Object(c["a"])(t),t=w.password;var s=/^(?!\D+$)(?![^a-zA-Z]+$)\S{6,20}$/;""===t?r(new Error("请输入密码!")):s.test(t)?r():r(new Error("密码为6-20位数字加字母!"))},i=function(e,t,r){w.passwords=Object(c["a"])(t),t=w.passwords;""===t?r(new Error("请再次输入密码!")):t!=w.password?r(new Error("两次输入密码不一致!")):r()},m=function(e,t,r){w.code=Object(c["a"])(t),t=w.code;var s=/^[a-z0-9]{6}$/;if(""===t)return r(new Error("请输入验证码!"));s.test(t)?r():r(new Error("验证码格式有误!"))},d=Object(u["e"])([{txt:"登录",current:!0,type:"login"},{txt:"注册",current:!1,type:"register"}]),f=Object(u["f"])("login"),p=Object(u["f"])(!0),g=Object(u["f"])(!1),v=Object(u["f"])("获取验证码"),b=Object(u["f"])(null),w=Object(u["e"])({username:"",password:"",passwords:"",code:""}),F=Object(u["e"])({username:[{validator:a,trigger:"blur"}],password:[{validator:o,trigger:"blur"}],passwords:[{validator:i,trigger:"blur"}],code:[{validator:m,trigger:"blur"}]});Object(u["d"])((function(){}));var x=function(e){d.forEach((function(e){e.current=!1})),e.current=!0,f.value=e.type,r.loginForm.resetFields(),O()},h=function(e){g.value=e.status,v.value=e.text},$=function(){if(""!=w.username){var e=/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/;e.test(w.username)?(h({status:!0,text:"已发送"}),Object(l["a"])({username:w.username,module:f.value}).then((function(e){s.$message({message:e.data.message,type:"success"}),console.log(e.data.message),p.value=!1,j(60)})).catch((function(e){console.log(e)}))):s.$message.error("邮箱格式有误，请重新输入!")}else s.$message.error("邮箱不能为空!")},j=function(e){b.value&&clearInterval(b.value);var t=e;b.value=setInterval((function(){t--,0===t?(clearInterval(b.value),h({status:!1,text:"再次获取"})):v.value="倒计时".concat(t)}),1e3)},O=function(){h({status:!1,text:"获取验证码"}),clearInterval(b.value)},_=function(e){r[e].validate((function(e){if(!e)return!1;"login"==f.value?k():y()}))},k=function(){var e={username:w.username,password:n()(w.password),code:w.code};s.$store.dispatch("login",e).then((function(e){s.$message({message:e.data.message,type:"success"}),s.$router.push("/backstage")})).catch((function(e){}))},y=function(){var e={username:w.username,password:n()(w.password),code:w.code,module:"register"};Object(l["c"])(e).then((function(e){s.$message({message:e.data.message,type:"success"}),x(d[0]),O()})).catch((function(e){}))};return{menuTab:d,model:f,loginButtonStatus:p,codeButtonStatus:g,codeButtonText:v,ruleForm:w,rules:F,toggleMenu:x,submitForm:_,getSms:$}}},m=i,d=(r("0639"),r("2877")),f=Object(d["a"])(m,s,a,!1,null,"6fb86b06",null);t["default"]=f.exports}}]);